---
- name: Test rjrpaz.server_management collection
  hosts: localhost
  gather_facts: false
  collections:
    - rjrpaz.server_management

  tasks:
    - name: Test collection import
      debug:
        msg: "Collection rjrpaz.server_management imported successfully"

    - name: Test role import with check mode
      include_role:
        name: ilo
      vars:
        firmware_package: "test-firmware.rpm"
      check_mode: true

    - name: Verify role variables are accessible
      debug:
        msg: "Role variables: installer_directory={{ installer_directory | default('not set') }}"
